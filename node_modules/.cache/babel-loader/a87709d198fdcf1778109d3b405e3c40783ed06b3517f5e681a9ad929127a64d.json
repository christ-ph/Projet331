{"ast":null,"code":"import _regenerator from \"/home/christ/T\\xE9l\\xE9chargements/projet 1.2.1/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _objectSpread from \"/home/christ/T\\xE9l\\xE9chargements/projet 1.2.1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/home/christ/T\\xE9l\\xE9chargements/projet 1.2.1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { createMission } from \"@/services/api\";\nexport default {\n  name: \"CreateMissionView\",\n  props: {\n    currentUser: {\n      type: Object,\n      \"default\": function _default() {\n        return null;\n      }\n    }\n  },\n  data: function data() {\n    return {\n      mission: {\n        title: \"\",\n        description: \"\",\n        budget: null,\n        budget_type: \"FIXED\",\n        deadline: \"\",\n        required_skills: []\n      },\n      newSkill: \"\",\n      loading: false\n    };\n  },\n  computed: {\n    isFormValid: function isFormValid() {\n      return this.mission.title && this.mission.description && this.mission.budget && this.mission.deadline && this.mission.required_skills.length > 0;\n    }\n  },\n  methods: {\n    addSkill: function addSkill() {\n      var skill = this.newSkill.trim();\n      if (skill && !this.mission.required_skills.includes(skill)) {\n        this.mission.required_skills.push(skill);\n        this.newSkill = \"\";\n      }\n    },\n    removeSkill: function removeSkill(index) {\n      this.mission.required_skills.splice(index, 1);\n    },\n    resetForm: function resetForm() {\n      if (confirm(\"Voulez-vous vraiment annuler ? Les donn√©es non sauvegard√©es seront perdues.\")) {\n        this.mission = {\n          title: \"\",\n          description: \"\",\n          budget: null,\n          budget_type: \"FIXED\",\n          deadline: \"\",\n          required_skills: []\n        };\n      }\n    },\n    submitMission: function submitMission() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var payload, response, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.p = _context.n) {\n            case 0:\n              if (_this.isFormValid) {\n                _context.n = 1;\n                break;\n              }\n              alert(\"‚ö†Ô∏è Veuillez remplir tous les champs obligatoires !\");\n              return _context.a(2);\n            case 1:\n              if (!(!_this.currentUser || !_this.currentUser.id)) {\n                _context.n = 2;\n                break;\n              }\n              alert(\"‚ùå Vous devez √™tre connect√© pour cr√©er une mission !\");\n              return _context.a(2);\n            case 2:\n              _this.loading = true;\n              _context.p = 3;\n              payload = _objectSpread(_objectSpread({}, _this.mission), {}, {\n                client_id: _this.currentUser.id\n              });\n              _context.n = 4;\n              return createMission(payload);\n            case 4:\n              response = _context.v;\n              if (response.status === 201 || response.status === 200) {\n                alert(\"‚úÖ Mission cr√©√©e avec succ√®s !\");\n                _this.$router.push(\"/dashboard-client\");\n              } else {\n                alert(\"‚ùå Erreur lors de la cr√©ation de la mission !\");\n              }\n              _context.n = 6;\n              break;\n            case 5:\n              _context.p = 5;\n              _t = _context.v;\n              console.error(\"Erreur cr√©ation mission :\", _t);\n              alert(\"‚ùå Une erreur est survenue.\");\n            case 6:\n              _context.p = 6;\n              _this.loading = false;\n              return _context.f(6);\n            case 7:\n              return _context.a(2);\n          }\n        }, _callee, null, [[3, 5, 6, 7]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["createMission","name","props","currentUser","type","Object","default","data","mission","title","description","budget","budget_type","deadline","required_skills","newSkill","loading","computed","isFormValid","length","methods","addSkill","skill","trim","includes","push","removeSkill","index","splice","resetForm","confirm","submitMission","_this","_asyncToGenerator","_regenerator","m","_callee","payload","response","_t","w","_context","p","n","alert","a","id","_objectSpread","client_id","v","status","$router","console","error","f"],"sources":["/home/christ/T√©l√©chargements/projet 1.2.1/src/views/MissionsViewClient.vue"],"sourcesContent":["<template>\n  <div class=\"create-mission\">\n    <h1>üìù Cr√©er une nouvelle mission</h1>\n\n    <form @submit.prevent=\"submitMission\" class=\"mission-form\">\n      <!-- Titre -->\n      <div class=\"form-group\">\n        <label for=\"title\">Titre de la mission *</label>\n        <input\n          id=\"title\"\n          v-model=\"mission.title\"\n          type=\"text\"\n          placeholder=\"Ex: D√©veloppement d'une application mobile\"\n          required\n        />\n      </div>\n\n      <!-- Description -->\n      <div class=\"form-group\">\n        <label for=\"description\">Description *</label>\n        <textarea\n          id=\"description\"\n          v-model=\"mission.description\"\n          rows=\"5\"\n          placeholder=\"D√©crivez en d√©tail les t√¢ches, les attentes, les livrables...\"\n          required\n        ></textarea>\n      </div>\n\n      <!-- Budget -->\n      <div class=\"form-group\">\n        <label for=\"budget\">Budget (‚Ç¨) *</label>\n        <input\n          id=\"budget\"\n          v-model.number=\"mission.budget\"\n          type=\"number\"\n          min=\"0\"\n          placeholder=\"Ex: 1200\"\n          required\n        />\n      </div>\n\n      <!-- Type de budget -->\n      <div class=\"form-group\">\n        <label for=\"budget_type\">Type de budget *</label>\n        <select v-model=\"mission.budget_type\" id=\"budget_type\" required>\n          <option value=\"FIXED\">üí∞ Forfait (montant fixe)</option>\n          <option value=\"HOURLY\">‚è± Taux horaire</option>\n        </select>\n      </div>\n\n      <!-- Deadline -->\n      <div class=\"form-group\">\n        <label for=\"deadline\">Date limite *</label>\n        <input id=\"deadline\" v-model=\"mission.deadline\" type=\"date\" required />\n      </div>\n\n      <!-- Comp√©tences requises -->\n      <div class=\"form-group\">\n        <label>Comp√©tences requises *</label>\n        <div class=\"skills-input-container\">\n          <input\n            v-model=\"newSkill\"\n            @keydown.enter.prevent=\"addSkill\"\n            type=\"text\"\n            placeholder=\"Ex: React, Python, Figma...\"\n          />\n          <button\n            type=\"button\"\n            @click=\"addSkill\"\n            class=\"btn-add-skill\"\n            :disabled=\"!newSkill.trim()\"\n          >\n            +\n          </button>\n        </div>\n        <div class=\"skills-list\" v-if=\"mission.required_skills.length > 0\">\n          <div\n            v-for=\"(skill, index) in mission.required_skills\"\n            :key=\"index\"\n            class=\"skill-tag\"\n          >\n            {{ skill }}\n            <button type=\"button\" @click=\"removeSkill(index)\">√ó</button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Boutons -->\n      <div class=\"form-actions\">\n        <button type=\"button\" @click=\"resetForm\" class=\"btn btn-secondary\">\n          Annuler\n        </button>\n        <button\n          type=\"submit\"\n          class=\"btn btn-primary\"\n          :disabled=\"loading || !isFormValid\"\n        >\n          <span v-if=\"loading\">‚è≥ Cr√©ation...</span>\n          <span v-else>‚úÖ Cr√©er la mission</span>\n        </button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { createMission } from \"@/services/api\";\n\nexport default {\n  name: \"CreateMissionView\",\n  props: {\n    currentUser: {\n      type: Object,\n      default: () => null,\n    },\n  },\n  data() {\n    return {\n      mission: {\n        title: \"\",\n        description: \"\",\n        budget: null,\n        budget_type: \"FIXED\",\n        deadline: \"\",\n        required_skills: [],\n      },\n      newSkill: \"\",\n      loading: false,\n    };\n  },\n  computed: {\n    isFormValid() {\n      return (\n        this.mission.title &&\n        this.mission.description &&\n        this.mission.budget &&\n        this.mission.deadline &&\n        this.mission.required_skills.length > 0\n      );\n    },\n  },\n  methods: {\n    addSkill() {\n      const skill = this.newSkill.trim();\n      if (skill && !this.mission.required_skills.includes(skill)) {\n        this.mission.required_skills.push(skill);\n        this.newSkill = \"\";\n      }\n    },\n    removeSkill(index) {\n      this.mission.required_skills.splice(index, 1);\n    },\n    resetForm() {\n      if (\n        confirm(\"Voulez-vous vraiment annuler ? Les donn√©es non sauvegard√©es seront perdues.\")\n      ) {\n        this.mission = {\n          title: \"\",\n          description: \"\",\n          budget: null,\n          budget_type: \"FIXED\",\n          deadline: \"\",\n          required_skills: [],\n        };\n      }\n    },\n    async submitMission() {\n      if (!this.isFormValid) {\n        alert(\"‚ö†Ô∏è Veuillez remplir tous les champs obligatoires !\");\n        return;\n      }\n\n      if (!this.currentUser || !this.currentUser.id) {\n        alert(\"‚ùå Vous devez √™tre connect√© pour cr√©er une mission !\");\n        return;\n      }\n\n      this.loading = true;\n      try {\n        const payload = {\n          ...this.mission,\n          client_id: this.currentUser.id,\n        };\n\n        const response = await createMission(payload);\n\n        if (response.status === 201 || response.status === 200) {\n          alert(\"‚úÖ Mission cr√©√©e avec succ√®s !\");\n          this.$router.push(\"/dashboard-client\");\n        } else {\n          alert(\"‚ùå Erreur lors de la cr√©ation de la mission !\");\n        }\n      } catch (err) {\n        console.error(\"Erreur cr√©ation mission :\", err);\n        alert(\"‚ùå Une erreur est survenue.\");\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.create-mission {\n  max-width: 700px;\n  margin: 0 auto;\n  padding: 2rem;\n}\nh1 {\n  margin-bottom: 1.5rem;\n  text-align: center;\n}\n.form-group {\n  margin-bottom: 1rem;\n}\ninput,\ntextarea,\nselect {\n  width: 100%;\n  padding: 0.6rem;\n  border-radius: 6px;\n  border: 1px solid #ccc;\n}\n.skills-input-container {\n  display: flex;\n  gap: 0.5rem;\n}\n.btn-add-skill {\n  background-color: #2563eb;\n  color: white;\n  border: none;\n  padding: 0.5rem 0.8rem;\n  border-radius: 5px;\n}\n.skills-list {\n  margin-top: 0.5rem;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.4rem;\n}\n.skill-tag {\n  background: #e0e7ff;\n  color: #1e3a8a;\n  padding: 0.4rem 0.6rem;\n  border-radius: 4px;\n  font-size: 0.9rem;\n}\n.skill-tag button {\n  margin-left: 6px;\n  background: none;\n  border: none;\n  color: red;\n  cursor: pointer;\n}\n.form-actions {\n  margin-top: 1.5rem;\n  display: flex;\n  justify-content: space-between;\n}\n.btn {\n  padding: 0.6rem 1.2rem;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.btn-primary {\n  background: #16a34a;\n  color: white;\n  border: none;\n}\n.btn-secondary {\n  background: #f3f4f6;\n  color: #374151;\n  border: 1px solid #d1d5db;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}